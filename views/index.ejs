<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />

		<link rel="stylesheet" href="../css/main.css" />

		<title>oAuth 2.0 Flow</title>
	</head>
	<body>
		<header>
			<h2>oAuth 2.0 Flow App</h2>
			<p>Use this app to test and understand the oAuth 2.0 flow.</p>
			<ul>
				<li>This App was tested with NetSuite ERP;</li>
				<li>On the Client Details provider, set the Redirect URI to <b>https://locahost:8080/</b>;</li>
				<li>It's mandatory to use https!</li>
				<li>The intent of this app is to be used locally;</li>
				<li>To use the https module is necessary to have a OpenSSL key and certificate;</li>
				<li>Set your own app config variables;</li>
				<li>It's necessary to be logged in NetSuite ERP;</li>
				<li>Please refer to the docs in <a href="https://github.com/apintok/authflow" target="_blank">Github</a> repo;</li>
			</ul>
		</header>

		<section class="container__steps">
			<div class="container__form">
				<h4>Step 1 - GET Request to the Authorization Endpoint.</h4>

				<form action="/v1/oauth2" method="get">
					<div class="input--group__params">
						<input type="text" id="clientid" name="clientid" placeholder="Client ID" /><br />
						<input type="text" id="state" name="state" placeholder="State" /><br />
						<input type="text" id="redirect_uri" name="redirect_uri" placeholder="Redirect URI" /><br />
					</div>
					<div class="input--group__scope">
						<span>Scope</span><br />
						<input type="checkbox" id="restlet" name="scope" value="restlets" checked />
						<label for="restlets"> Restlets</label><br />
						<input type="checkbox" id="rest_webservices" name="scope" value="rest_webservices" />
						<label for="rest_webservices"> Rest Web Services</label><br />
						<span class="warning">Warning - Please Select 1 or 2 Scopes.</span>
					</div>

					<input class="btn" id="authorize" type="submit" value="Authorize" />
				</form>
			</div>

			<div class="container__form">
				<h4>Step 2 - POST Request to the Token Endpoint.</h4>

				<form action="/v1/oauth2" method="post">
					<div class="input--group__params">
						<input type="text" id="code" name="code" value="<%= code.code %>" placeholder="Code" /><br />
						<input type="text" id="redirect_uri_post" name="redirect_uri_post" placeholder="Redirect URI" /><br />
					</div>

					<div class="input--group__scope">
						<span>Grant Type</span><br />

						<input type="radio" id="authorization_code" name="grant_type" value="authorization_code" checked />
						<label for="authorization_code"> Authorization Code</label><br />
						<input type="radio" id="refresh_token" name="grant_type" value="refresh_token" />
						<label for="refresh_token"> Refresh Token</label><br />
					</div>

					<input class="btn" type="submit" value="Get Token" />
				</form>
			</div>
		</section>

		<section class="container__token">
			<h4>Token Result</h4>
			<textarea name="token" id="token" cols="30" rows="10"><%= access_token %></textarea>
		</section>

		<script src="../js/index.js"></script>
	</body>
</html>
